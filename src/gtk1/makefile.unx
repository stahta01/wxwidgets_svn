#
# File:		makefile.unx
# Author:	Robert Roebling
# Created:	1998
# Updated:	
# Copyright:	(c) 1998, 1999
#
#
# Makefile for wxWindows library, GTK 1.2, Unix
#

EXTRACFLAGS=-DLEX_SCANNER

include ../make.env

LIB_CPP_SRC=\
\
 accel.cpp \
 app.cpp \
 bitmap.cpp \
 bmpbuttn.cpp \
 brush.cpp \
 button.cpp \
 checkbox.cpp \
 checklst.cpp \
 choice.cpp \
 choicdlg.cpp \
 clipbrd.cpp \
 colour.cpp \
 combobox.cpp \
 control.cpp \
 cursor.cpp \
 data.cpp \
 dataobj.cpp \
 dc.cpp \
 dcclient.cpp \
 dcmemory.cpp \
 dcscreen.cpp \
 dialog.cpp \
 dnd.cpp \
 filedlg.cpp \
 font.cpp \
 frame.cpp \
 gauge.cpp \
 gdiobj.cpp \
 icon.cpp \
 listbox.cpp \
 main.cpp \
 mdi.cpp \
 menu.cpp \
 minifram.cpp \
 msgdlg.cpp \
 notebook.cpp \
 palette.cpp \
 pen.cpp \
 radiobox.cpp \
 radiobut.cpp \
 region.cpp \
 scrolbar.cpp \
 settings.cpp \
 slider.cpp \
 spinbutt.cpp \
 statbmp.cpp \
 statbox.cpp \
 statline.cpp \
 stattext.cpp \
 tbargtk.cpp \
 textctrl.cpp \
 textdlg.cpp \
 timer.cpp \
 tooltip.cpp \
 utilsgtk.cpp \
 utilsres.cpp \
 wave.cpp \
 window.cpp \
\
 ../common/cmndata.cpp \
 ../common/config.cpp \
 ../common/date.cpp \
 ../common/datstrm.cpp \
 ../common/dcbase.cpp \
 ../common/dlgcmn.cpp \
 ../common/docmdi.cpp \
 ../common/docview.cpp \
 ../common/dynarray.cpp \
 ../common/dynlib.cpp \
 ../common/event.cpp \
 ../common/file.cpp \
 ../common/fileconf.cpp \
 ../common/filefn.cpp \
 ../common/framecmn.cpp \
 ../common/ftp.cpp \
 ../common/gdicmn.cpp \
 ../common/hash.cpp \
 ../common/helpbase.cpp \
 ../common/http.cpp \
 ../common/image.cpp \
 ../common/imagjpeg.cpp \
 ../common/imagbmp.cpp \
 ../common/imaggif.cpp \
 ../common/imagpng.cpp \
 ../common/intl.cpp \
 ../common/ipcbase.cpp \
 ../common/layout.cpp \
 ../common/list.cpp \
 ../common/log.cpp \
 ../common/longlong.cpp \
 ../common/matrix.cpp \
 ../common/memory.cpp \
 ../common/mimetype.cpp \
 ../common/module.cpp \
 ../common/mstream.cpp \
 ../common/object.cpp \
 ../common/objstrm.cpp \
 ../common/odbc.cpp \
 ../common/paper.cpp \
 ../common/prntbase.cpp \
 ../common/process.cpp \
 ../common/protocol.cpp \
 ../common/resource.cpp \
 ../common/sckaddr.cpp \
 ../common/sckfile.cpp \
 ../common/sckint.cpp \
 ../common/sckipc.cpp \
 ../common/sckstrm.cpp \
 ../common/serbase.cpp \
 ../common/socket.cpp \
 ../common/stream.cpp \
 ../common/string.cpp \
 ../common/tbarbase.cpp \
 ../common/tbarsmpl.cpp \
 ../common/textfile.cpp \
 ../common/time.cpp \
 ../common/timercmn.cpp \
 ../common/tokenzr.cpp \
 ../common/url.cpp \
 ../common/utilscmn.cpp \
 ../common/valgen.cpp \
 ../common/validate.cpp \
 ../common/valtext.cpp \
 ../common/variant.cpp \
 ../common/wfstream.cpp \
 ../common/wincmn.cpp \
 ../common/wxchar.cpp \
 ../common/wxexpr.cpp \
 ../common/zstream.cpp \
\
 ../common/db.cpp \
 ../common/dbtable.cpp \
\
 ../unix/threadpsx.cpp \
 ../unix/utilsunx.cpp \
\
 ../generic/caret.cpp \
 ../generic/colrdlgg.cpp \
 ../generic/dcpsg.cpp \
 ../generic/dirdlgg.cpp \
 ../generic/fontdlgg.cpp \
 ../generic/gridg.cpp \
 ../generic/helpext.cpp \
 ../generic/helphtml.cpp \
 ../generic/imaglist.cpp \
 ../generic/laywin.cpp \
 ../generic/listctrl.cpp \
 ../generic/panelg.cpp \
 ../generic/printps.cpp \
 ../generic/prntdlgg.cpp \
 ../generic/progdlgg.cpp \
 ../generic/prop.cpp \
 ../generic/propform.cpp \
 ../generic/proplist.cpp \
 ../generic/sashwin.cpp \
 ../generic/scrolwin.cpp \
 ../generic/splitter.cpp \
 ../generic/statusbr.cpp \
 ../generic/tabg.cpp \
 ../generic/tipdlg.cpp \
 ../generic/treectrl.cpp


ZLIB_SRC=\
  ../zlib/adler32.c ../zlib/deflate.c ../zlib/infblock.c\
  ../zlib/inflate.c ../zlib/zutil.c ../zlib/compress.c \
  ../zlib/infcodes.c ../zlib/inftrees.c ../zlib/trees.c \
  ../zlib/crc32.c ../zlib/gzio.c ../zlib/inffast.c\
  ../zlib/infutil.c ../zlib/uncompr.c
  
PNG_SRC=\
 ../png/png.c \
 ../png/pngset.c \
 ../png/pngget.c \
 ../png/pngrutil.c \
 ../png/pngtrans.c \
 ../png/pngwutil.c \
 ../png/pngread.c \
 ../png/pngrio.c \
 ../png/pngwio.c \
 ../png/pngwrite.c \
 ../png/pngrtran.c \
 ../png/pngwtran.c \
 ../png/pngmem.c \
 ../png/pngerror.c \
 ../png/pngpread.c

JPEG_SRC=\
  ../jpeg/jcomapi.c \
  ../jpeg/jutils.c \
  ../jpeg/jerror.c \
  ../jpeg/jmemmgr.c \
  ../jpeg/jmemnobs.c \
  ../jpeg/jcapimin.c \
  ../jpeg/jcapistd.c \
  ../jpeg/jctrans.c \
  ../jpeg/jcparam.c \
  ../jpeg/jdatadst.c \
  ../jpeg/jcinit.c \
  ../jpeg/jcmaster.c \
  ../jpeg/jcmarker.c \
  ../jpeg/jcmainct.c \
  ../jpeg/jcprepct.c \
  ../jpeg/jccoefct.c \
  ../jpeg/jccolor.c \
  ../jpeg/jcsample.c \
  ../jpeg/jchuff.c \
  ../jpeg/jcphuff.c \
  ../jpeg/jcdctmgr.c \
  ../jpeg/jfdctfst.c \
  ../jpeg/jfdctflt.c \
  ../jpeg/jfdctint.c \
  ../jpeg/jdapimin.c \
  ../jpeg/jdapistd.c \
  ../jpeg/jdtrans.c \
  ../jpeg/jdatasrc.c \
  ../jpeg/jdmaster.c \
  ../jpeg/jdinput.c \
  ../jpeg/jdmarker.c \
  ../jpeg/jdhuff.c \
  ../jpeg/jdphuff.c \
  ../jpeg/jdmainct.c \
  ../jpeg/jdcoefct.c \
  ../jpeg/jdpostct.c \
  ../jpeg/jddctmgr.c \
  ../jpeg/jidctfst.c \
  ../jpeg/jidctflt.c \
  ../jpeg/jidctint.c \
  ../jpeg/jidctred.c \
  ../jpeg/jdsample.c \
  ../jpeg/jdcolor.c \
  ../jpeg/jquant1.c \
  ../jpeg/jquant2.c \
  ../jpeg/jdmerge.c
 
LIB_C_SRC=\
\
 win_gtk.c \
 ../common/y_tab.c \
 ../common/extended.c

# Only need to compile zlib files if we don't
# already have a zlib library installed on our system
# (or we wish to statically link them for some reason)
EXTRA_C_SRC=\
  $(ZLIB_SRC) $(PNG_SRC) $(JPEG_SRC)

all:    $(WXLIB)

# Define library objects
OBJECTS=\
 $(LIB_CPP_SRC:.cpp=.o) $(LIB_C_SRC:.c=.o) $(EXTRA_C_SRC:.c=.o)

$(WXLIB) : $(OBJECTS)
	ar $(AROPTIONS) $@ $(OBJECTS)
	$(RANLIB) $@

../common/y_tab.$(OBJSUFF):	../common/y_tab.c ../common/lex_yy.c
	$(CCLEX) -c $(CFLAGS) -DNO_CONFIGURE -o $@ ../common/y_tab.c

# Replace lex with flex if you run into compilation
# problems with lex_yy.c. See also note about LEX_SCANNER
# above.
../common/lex_yy.c:	../common/lexer.l
	$(LEX) -o../common/lex.yy.c ../common/lexer.l 
	sed -e "s/BUFSIZ/5000/g" < ../common/lex.yy.c | \
	sed -e "s/yyoutput(c)/void yyoutput(c)/g" | \
        sed -e "s/YYLMAX 200/YYLMAX 5000/g" > ../common/lex_yy.c
	/bin/rm -f ../common/lex.yy.c

# Replace yacc with bison if you run into compilation
# problems with y_tab.c.
../common/y_tab.c:	../common/parser.y
	$(YACC) ../common/parser.y
	mv y.tab.c ../common/y_tab.c

clean:
	rm -f $(OBJECTS) $(WXLIB)

